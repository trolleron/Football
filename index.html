<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <title>Telegram Football Platformer</title>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.55.2/dist/phaser.min.js"></script>
    <style>
        body { margin: 0; overflow: hidden; background: #000; }
        canvas { display: block; }
    </style>
</head>
<body>
<script>
const config = {
    type: Phaser.AUTO,
    width: 800,
    height: 450, // Соотношение для альбомной ориентации
    parent: 'game-container',
    physics: {
        default: 'arcade',
        arcade: { gravity: { y: 1000 }, debug: false }
    },
    scene: { preload: preload, create: create, update: update }
};

const game = new Phaser.Game(config);
let player, ball, cursors, joystick;

function preload() {
    // Загружаем временные спрайты (цветные квадраты, пока нет картинок)
    this.load.image('ground', 'https://labs.phaser.io/assets/sprites/platform.png');
    this.load.image('ball', 'https://labs.phaser.io/assets/sprites/pangball.png');
    this.load.spritesheet('player', 'https://labs.phaser.io/assets/sprites/dude.png', { frameWidth: 32, frameHeight: 48 });
}

function create() {
    // 1. Создаем поле (платформу)
    let platforms = this.physics.add.staticGroup();
    platforms.create(400, 435, 'ground').setScale(2).refreshBody();

    // 2. Создаем игрока
    player = this.physics.add.sprite(100, 300, 'player');
    player.setBounce(0.2);
    player.setCollideWorldBounds(true);

    // 3. Создаем мяч
    ball = this.physics.add.sprite(400, 300, 'ball');
    ball.setBounce(0.8);
    ball.setCollideWorldBounds(true);
    ball.setDragX(50); // Трение мяча о землю

    // 4. Физика столкновений
    this.physics.add.collider(player, platforms);
    this.physics.add.collider(ball, platforms);
    this.physics.add.collider(player, ball); // Игрок толкает мяч

    // 5. Логика джойстика (упрощенная для тача)
    this.input.on('pointermove', (pointer) => {
        if (pointer.isDown) {
            if (pointer.x < 200) { // Зона джойстика слева
                if (pointer.x < 100) player.setVelocityX(-160);
                else if (pointer.x > 100) player.setVelocityX(160);
            }
        }
    });
    
    this.input.on('pointerup', () => player.setVelocityX(0));
}

function update() {
    // Здесь будет анимация и проверка голов
}
</script>
</body>
</html>
